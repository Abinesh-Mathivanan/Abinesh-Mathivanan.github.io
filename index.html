<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <title>Beens ðŸš€ðŸŒŒ</title>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/atom-one-dark.min.css">
    <link id="highlight-theme" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="light-mode">
    <nav>
        <button onclick="showSection('home-section')">Home</button>
        <button onclick="showSection('about-section')">About</button>
        <button onclick="showBlogList()">Blog</button>
        <label class="theme" style="margin-top: 0;">
            <input class="input" type="checkbox" onclick="toggleTheme()" aria-label="Toggle dark mode">
            <svg width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="icon icon-sun">
                <circle r="5" cy="12" cx="12"></circle>
                <line y2="3" y1="1" x2="12" x1="12"></line>
                <line y2="23" y1="21" x2="12" x1="12"></line>
                <line y2="5.64" y1="4.22" x2="5.64" x1="4.22"></line>
                <line y2="19.78" y1="18.36" x2="19.78" x1="18.36"></line>
                <line y2="12" y1="12" x2="3" x1="1"></line>
                <line y2="12" y1="12" x2="23" x1="21"></line>
                <line y2="18.36" y1="19.78" x2="5.64" x1="4.22"></line>
                <line y2="4.22" y1="5.64" x2="19.78" x1="18.36"></line>
            </svg>
            <svg viewBox="0 0 24 24" class="icon icon-moon">
                <path d="m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z"></path>
            </svg>
        </label>
    </nav>

    <div id="decode-text" style="margin-top: 6%; font-size: large;">
        <div class="line">I'm Abinesh Mathivanan,</div>
        <div class="line">currently merging Computer Science,</div>
        <div class="line">Physics, and Humans.</div>
    </div>

    <div id="content">
        <div id="home-section" style="display: block; margin-top: 3%;">
            <p style="font-family: Arial, sans-serif;">
                You could call me <strong>Beens</strong>. Probably the first guy in my class to choose AI as his domain of study (I did that back in 2020).
                Constantly doing some Computer stuff. Working around <strong>Deep Learning + Physics + Math</strong>. 
                Also, I'm trying to learn <strong>Telugu</strong> and <strong>Hindi</strong>.
                You could find me implementing tech in impressive ways such as the Cosmo Classifier or in-love.js.
            </p>
             

            <p style="font-family: Arial, sans-serif;">
                Download my resume <a href="assets/abinesh_resume.pdf" target="_blank" style="font-weight: bold; text-decoration: none;">here</a>,
                and read my blog <strong onclick="showBlogList()" style="font-weight: bold; text-decoration: none;"> here. </strong>
            </p>
            
            <div class="social-icons">
                <a href="https://www.linkedin.com/in/abineshmathivanan/" target="_blank" aria-label="LinkedIn">
                    <svg class="icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.77,17.89 L5.77,7.17 L2.21,7.17 L2.21,17.89 L5.77,17.89 L5.77,17.89 Z M3.99,5.71 C5.23,5.71 6.01,4.89 6.01,3.86 C5.99,2.8 5.24,2 4.02,2 C2.8,2 2,2.8 2,3.85 C2,4.88 2.77,5.7 3.97,5.7 L3.99,5.7 L3.99,5.71 L3.99,5.71 Z"/>
                        <path d="M7.75,17.89 L11.31,17.89 L11.31,11.9 C11.31,11.58 11.33,11.26 11.43,11.03 C11.69,10.39 12.27,9.73 13.26,9.73 C14.55,9.73 15.06,10.71 15.06,12.15 L15.06,17.89 L18.62,17.89 L18.62,11.74 C18.62,8.45 16.86,6.92 14.52,6.92 C12.6,6.92 11.75,7.99 11.28,8.73 L11.3,8.73 L11.3,7.17 L7.75,7.17 C7.79,8.17 7.75,17.89 7.75,17.89 L7.75,17.89 L7.75,17.89 Z"/>
                    </svg>
                </a>
                <a href="https://github.com/Abinesh-Mathivanan" target="_blank" aria-label="GitHub">
                    <svg class="icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10,1 C5.03,1 1,5.03 1,10 C1,13.98 3.58,17.35 7.16,18.54 C7.61,18.62 7.77,18.34 7.77,18.11 C7.77,17.9 7.76,17.33 7.76,16.58 C5.26,17.12 4.73,15.37 4.73,15.37 C4.32,14.33 3.73,14.05 3.73,14.05 C2.91,13.5 3.79,13.5 3.79,13.5 C4.69,13.56 5.17,14.43 5.17,14.43 C5.97,15.8 7.28,15.41 7.79,15.18 C7.87,14.6 8.1,14.2 8.36,13.98 C6.36,13.75 4.26,12.98 4.26,9.53 C4.26,8.55 4.61,7.74 5.19,7.11 C5.1,6.88 4.79,5.97 5.28,4.73 C5.28,4.73 6.04,4.49 7.75,5.65 C8.47,5.45 9.24,5.35 10,5.35 C10.76,5.35 11.53,5.45 12.25,5.65 C13.97,4.48 14.72,4.73 14.72,4.73 C15.21,5.97 14.9,6.88 14.81,7.11 C15.39,7.74 15.73,8.54 15.73,9.53 C15.73,12.99 13.63,13.75 11.62,13.97 C11.94,14.25 12.23,14.8 12.23,15.64 C12.23,16.84 12.22,17.81 12.22,18.11 C12.22,18.35 12.38,18.63 12.84,18.54 C16.42,17.35 19,13.98 19,10 C19,5.03 14.97,1 10,1 L10,1 Z"/>
                    </svg>
                </a>
                <a href="https://www.instagram.com/space_relativity/" target="_blank" aria-label="Instagram">
                    <svg class="icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.55,1H6.46C3.45,1,1,3.44,1,6.44v7.12c0,3,2.45,5.44,5.46,5.44h7.08c3.02,0,5.46-2.44,5.46-5.44V6.44 C19.01,3.44,16.56,1,13.55,1z M17.5,14c0,1.93-1.57,3.5-3.5,3.5H6c-1.93,0-3.5-1.57-3.5-3.5V6c0-1.93,1.57-3.5,3.5-3.5h8 c1.93,0,3.5,1.57,3.5,3.5V14z"/>
                        <circle cx="14.87" cy="5.26" r="1.09"/>
                        <path d="M10.03,5.45c-2.55,0-4.63,2.06-4.63,4.6c0,2.55,2.07,4.61,4.63,4.61c2.56,0,4.63-2.061,4.63-4.61 C14.65,7.51,12.58,5.45,10.03,5.45L10.03,5.45L10.03,5.45z M10.08,13c-1.66,0-3-1.34-3-2.99c0-1.65,1.34-2.99,3-2.99s3,1.34,3,2.99 C13.08,11.66,11.74,13,10.08,13L10.08,13L10.08,13z"/>
                    </svg>
                </a>
            </div>
        </div>

        <div id="about-section" style="display: none;">
            <h2>About Me</h2>
            <div id="experience-cards" class="experience-cards"></div>
            <h2 style="margin-top: 4%;">Projects</h2>
            <div id="project-cards" class="project-cards"></div>
        </div>

        <div id="blog-list" style="display: none;">
            <h2>Available Blogs</h2>
            <ul id="blog-list-ul" class="blog-list"></ul>
        </div>

        <div id="single-blog" style="display: none;">
            <button onclick="showBlogList()">Back to Blog List</button>
            <div id="single-blog-output"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }

        window.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
            }
        });

        async function loadExperiences() {
            try {
                const response = await fetch('assets/experiences.json');
                const experiences = await response.json();
                const experienceCards = document.getElementById('experience-cards');
                experienceCards.innerHTML = '';
                experiences.forEach(exp => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <h3>${exp.company}</h3>
                        <p><strong>Role:</strong> ${exp.role}</p>
                        <p><strong>Duration:</strong> ${exp.duration}</p>
                        <ul>${exp.description.map(point => `<li>${point}</li>`).join('')}</ul>
                    `;
                    experienceCards.appendChild(card);
                });
            } catch (error) {
                console.error("Error loading experiences:", error);
            }
        }

        async function loadProjects() {
            try {
                const response = await fetch('assets/projects.json');
                const data = await response.json();
                const projects = data.projects;
                const projectCards = document.getElementById('project-cards');
                projectCards.innerHTML = '';
                projects.forEach(proj => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <h3>${proj.title}</h3>
                        <p><strong>Technologies:</strong> ${proj.technologies.join(', ')}</p>
                        <ul>${proj.description.map(point => `<li>${point}</li>`).join('')}</ul>
                    `;
                    projectCards.appendChild(card);
                });
            } catch (error) {
                console.error("Error loading projects:", error);
            }
        }

        function showSection(sectionId) {
            const sections = document.querySelectorAll("#content > div");
            sections.forEach(section => section.style.display = "none");
            document.getElementById(sectionId).style.display = "block";
            const decodeTextDiv = document.getElementById("decode-text");
            if (sectionId === "home-section") {
                decodeTextDiv.style.display = "block";
                decodeText();
                startDecodeTextLoop();
            } else {
                decodeTextDiv.style.display = "none";
                stopDecodeTextLoop();
            }
            if (sectionId === "about-section") {
                loadExperiences();
                loadProjects();
            }
        }

        const showBlogList = () => {
            document.querySelectorAll('#content > div').forEach(div => div.style.display = 'none');
            document.getElementById('blog-list').style.display = 'block';
            document.getElementById('decode-text').style.display = 'none';
            const blogListUl = document.getElementById('blog-list-ul');
            blogListUl.innerHTML = '';
            blogs.forEach(blog => {
                const li = document.createElement('li');
                li.classList.add('blog-item');
                li.innerHTML = `
                    <img src="${blog.image}" alt="${blog.title} Thumbnail" class="blog-thumbnail" />
                    <div class="blog-content">
                        <h3 class="blog-title">${blog.title}</h3>
                        <p class="blog-excerpt">${blog.excerpt}</p>
                    </div>
                `;
                li.onclick = () => displayBlog(blog.file);
                blogListUl.appendChild(li);
            });
        };

        function displayBlog(filePath) {
            showSection('single-blog');
            fetch(filePath)
                .then(response => {
                    if (!response.ok) throw new Error(`Failed to load: ${response.statusText}`);
                    return response.text();
                })
                .then(data => {
                    renderBlogContent(data);
                })
                .catch(error => {
                    console.error('Error loading blog:', error);
                    alert('Error loading blog: ' + error.message);
                });
        }

        function renderBlogContent(data) {
    const blogContainer = document.createElement('div');
    blogContainer.innerHTML = marked.parse(data);

    try {
        renderMathInElement(blogContainer, {
            delimiters: [
                { left: '$$', right: '$$', display: true },
                { left: '$', right: '$', display: false }
            ],
            throwOnError: false,
            macros: { "\\RR": "\\mathbb{R}", "\\vec": "\\mathbf", "\\RealNumbers": "\\mathbb{R}" },
            errorCallback: (msg) => { console.error("Failed to render LaTeX:", msg); return `\\text{Error rendering: ${msg}}`; }
        });
    } catch (error) {
        console.error('LaTeX rendering error:', error);
    }

    function applyHighlightTheme() {
    const existingThemeLink = document.getElementById('highlight-theme');
    if (existingThemeLink) {
        existingThemeLink.remove();
    }

    const themeLink = document.createElement('link');
    themeLink.id = 'highlight-theme';
    themeLink.rel = 'stylesheet';

    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css';
    } else {
        themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css';
    }

    document.head.appendChild(themeLink);

    document.querySelectorAll('pre code').forEach(block => {
        hljs.highlightElement(block);
    });
}

applyHighlightTheme();

window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyHighlightTheme);

    blogContainer.querySelectorAll('pre code').forEach(block => {
        const container = document.createElement('div');
        container.classList.add('code-container');

        const copyButton = document.createElement('button');
        copyButton.classList.add('copy-button');
        copyButton.textContent = 'Copy';

        copyButton.onclick = () => {
            navigator.clipboard.writeText(block.innerText)
                .then(() => {
                    copyButton.textContent = 'Copied!';
                    setTimeout(() => copyButton.textContent = 'Copy', 2000);
                })
                .catch(err => console.error('Error copying text:', err));
        };

        const codeClone = block.cloneNode(true);
        container.appendChild(copyButton);
        container.appendChild(codeClone);

        block.parentNode.replaceChild(container, block);
        
        hljs.highlightElement(codeClone);
    });

    document.getElementById('single-blog-output').innerHTML = '';
    document.getElementById('single-blog-output').appendChild(blogContainer);

    const observer = new MutationObserver(() => {
        try {
            renderMathInElement(blogContainer, {
                delimiters: [
                    { left: '$$', right: '$$', display: true },
                    { left: '$', right: '$', display: false }
                ],
                throwOnError: false,
                macros: { "\\RR": "\\mathbb{R}", "\\vec": "\\mathbf", "\\RealNumbers": "\\mathbb{R}" },
                errorCallback: (msg) => { console.error("Failed to render LaTeX:", msg); return `\\text{Error rendering: ${msg}}`; }
            });
        } catch (error) {
            console.error('LaTeX re-rendering error:', error);
        }
    });
    observer.observe(blogContainer, { childList: true, subtree: true });
}
        let decodeTextLoop = null;

        function decodeText() {
            const textElement = document.getElementById('decode-text');
            const lines = Array.from(textElement.querySelectorAll('.line'));
            textElement.innerHTML = '';
            lines.forEach(line => {
                const lineWrapper = document.createElement('div');
                lineWrapper.className = line.className;
                [...line.textContent.trim()].forEach(char => {
                    const span = document.createElement('span');
                    span.textContent = char;
                    span.dataset.original = char;
                    span.className = 'text-animation';
                    lineWrapper.appendChild(span);
                });
                textElement.appendChild(lineWrapper);
            });
            const elements = textElement.querySelectorAll('.text-animation');
            randomizeAndSettleText(elements, 2000);
        }

        function randomizeAndSettleText(elements, duration) {
            const charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";
            const startTime = Date.now();
            const interval = setInterval(() => {
                const progress = (Date.now() - startTime) / duration;
                elements.forEach(el => {
                    el.textContent = Math.random() < progress ? el.dataset.original : charset[Math.floor(Math.random() * charset.length)];
                });
                if (progress >= 1) clearInterval(interval);
            }, 100);
        }

        function startDecodeTextLoop() {
            stopDecodeTextLoop();
            decodeTextLoop = setInterval(() => { decodeText(); }, 6000);
        }

        function stopDecodeTextLoop() {
            if (decodeTextLoop) {
                clearInterval(decodeTextLoop);
                decodeTextLoop = null;
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            decodeText();
            startDecodeTextLoop();
        });

        const blogs = [
            { id: 'beens-blog', title: 'Intro Blog', file: '/blogs/beens-blog.md', image: 'images/pix-cat.png', excerpt: 'Nothing...' },
            { id: 'typical-cs', title: 'Typical CS Student', file: '/blogs/typical-cs.md', image: 'images/pixel-ques.png', excerpt: 'just read it' }
        ];
    </script>
</body>
</html>